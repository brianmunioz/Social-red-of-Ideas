{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\brian\\\\Documents\\\\Frontend\\\\ideasapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\brian\\\\Documents\\\\Frontend\\\\ideasapp\\\\src\\\\components\\\\idea\\\\CreateDeleteForm.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Form, Button, Alert } from 'react-bootstrap';\nimport axios from 'axios';\nimport logout from '../../helpers/logout';\n\nvar createDeleteForm = function createDeleteForm(_ref) {\n  var mode = _ref.mode;\n  var navigate = useNavigate();\n  var userID = JSON.parse(localStorage.getItem('user'));\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      description = _useState2[0],\n      setDescription = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      idea = _useState4[0],\n      setIdea = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      success = _useState8[0],\n      setSuccess = _useState8[1];\n\n  var _useParams = useParams(),\n      ideaID = _useParams.ideaID;\n\n  var token = document.cookie.replace('token=', '');\n  var REACT_APP_API_URL = process.env.REACT_APP_API_URL;\n\n  if (mode === 'edit') {\n    useEffect(function () {\n      axios.get(REACT_APP_API_URL + 'idea/' + ideaID).then(function (dat) {\n        if (dat.status !== 200 && dat.status !== 201) {\n          document.cookie = \"token=; max-age=0\";\n          localStorage.removeItem('user');\n          return navigate('/');\n        }\n\n        setIdea(dat.data.idea);\n        setDescription(dat.data.description);\n      }).catch(function (res) {\n        if (res.response.status === 401) logout();\n      });\n    }, []);\n  }\n\n  var edit = function edit(e) {\n    e.preventDefault();\n\n    if (idea.trim() === '') {\n      setError('You need a complete idea field!');\n    } else if (description.trim() === '') {\n      setError('You need a complete description field!');\n    } else {\n      axios.patch(REACT_APP_API_URL + 'idea/' + ideaID, {\n        idea: idea,\n        description: description\n      }, {\n        headers: {\n          'Authorization': token\n        }\n      }).then(function (dat) {\n        if (dat.status === 200 && dat.status === 201) {\n          setSuccess('updated successfully! ');\n        }\n      }).catch(function (res) {\n        if (res.response.status === 401) logout();\n      });\n    }\n  };\n\n  var createIdea = function createIdea(e) {\n    e.preventDefault();\n\n    if (idea.trim() === '') {\n      setError('You need complete idea field!');\n    } else if (description.trim() === '') {\n      setError('You need complete description field!');\n    } else {\n      axios.post(REACT_APP_API_URL + 'idea', {\n        idea: idea,\n        description: description\n      }, {\n        headers: {\n          'Authorization': token\n        }\n      }).then(function (dat) {\n        if (dat.status === 200 && dat.status === 201) {\n          setSuccess('Idea created! ');\n        }\n      }).catch(function (res) {\n        if (res.response.status === 401) logout();\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, ideaID ? 'Edit idea' : 'Create new idea'), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: ideaID ? edit : createIdea,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, error && success === '' && /*#__PURE__*/React.createElement(Alert, {\n    className: \"mt-3\",\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }, \" \", error), !error && success !== '' && /*#__PURE__*/React.createElement(Alert, {\n    className: \"mt-3\",\n    variant: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 38\n    }\n  }, \" \", success), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Titulo de la idea\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"idea\",\n    value: idea,\n    onChange: function onChange(e) {\n      return setIdea(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Idea description\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"description\",\n    value: description,\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-dark\",\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n};\n\nexport default createDeleteForm;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Form","Button","Alert","axios","logout","createDeleteForm","mode","navigate","userID","JSON","parse","localStorage","getItem","description","setDescription","idea","setIdea","error","setError","success","setSuccess","ideaID","token","document","cookie","replace","REACT_APP_API_URL","process","env","get","then","dat","status","removeItem","data","catch","res","response","edit","e","preventDefault","trim","patch","headers","createIdea","post","target","value"],"sources":["C:/Users/brian/Documents/Frontend/ideasapp/src/components/idea/CreateDeleteForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Form, Button, Alert } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport logout from '../../helpers/logout';\r\n\r\nconst createDeleteForm = ({ mode }) => {\r\n  const navigate = useNavigate();\r\n  const userID = JSON.parse(localStorage.getItem('user'));\r\n  const [description, setDescription] = useState('');\r\n  const [idea, setIdea] = useState('');\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  let { ideaID } = useParams();\r\n  const token = document.cookie.replace('token=', '');\r\n  const {REACT_APP_API_URL} = process.env;\r\n\r\n  if (mode === 'edit') {\r\n    useEffect(() => {\r\n      axios.get(REACT_APP_API_URL+'idea/' + ideaID)\r\n        .then(dat => {\r\n          if (dat.status !== 200 && dat.status !== 201) {\r\n            document.cookie = \"token=; max-age=0\";\r\n            localStorage.removeItem('user');\r\n            return navigate('/');\r\n          }\r\n          setIdea(dat.data.idea);\r\n          setDescription(dat.data.description);\r\n        }\r\n        )\r\n        .catch(res => {\r\n          if (res.response.status === 401) logout();\r\n        })\r\n    }, []);\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  const edit = (e) => {\r\n    e.preventDefault();\r\n    if (idea.trim() === '') {\r\n      setError('You need a complete idea field!');\r\n    } else if (description.trim() === '') {\r\n      setError('You need a complete description field!');\r\n    } else {\r\n      axios.patch(REACT_APP_API_URL+'idea/' + ideaID, {\r\n        idea: idea,\r\n        description: description\r\n      }, {\r\n        headers: {\r\n          'Authorization': token\r\n        }\r\n      })\r\n        .then(dat => {\r\n          if (dat.status === 200 && dat.status === 201) {\r\n            setSuccess('updated successfully! ')\r\n\r\n          } \r\n        })\r\n        .catch(res => {\r\n          if (res.response.status === 401) logout();\r\n        })\r\n\r\n    }\r\n\r\n\r\n  }\r\n  const createIdea = (e) => {\r\n    e.preventDefault();\r\n    if (idea.trim() === '') {\r\n      setError('You need complete idea field!');\r\n    } else if (description.trim() === '') {\r\n      setError('You need complete description field!');\r\n    } else {\r\n      axios.post(REACT_APP_API_URL+'idea', {\r\n        idea: idea,\r\n        description: description,\r\n      }, {\r\n        headers: {\r\n          'Authorization': token\r\n        }\r\n      }).then(\r\n        (dat) => {\r\n          if (dat.status === 200 && dat.status === 201) {\r\n            setSuccess('Idea created! ');\r\n           }\r\n        }\r\n      )\r\n        .catch(res => {\r\n          if (res.response.status === 401) logout();\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h1>{ideaID ? ('Edit idea') : ('Create new idea')}</h1>\r\n      <Form onSubmit={ideaID ? (edit) : (createIdea)}>\r\n        {error && success === '' && <Alert className='mt-3' variant='danger'> {error}</Alert>}\r\n        {!error && success !== '' && <Alert className='mt-3' variant='success'> {success}</Alert>}\r\n\r\n\r\n        <Form.Group className=\"mb-3\" >\r\n          <Form.Label>Titulo de la idea</Form.Label>\r\n          <Form.Control type=\"text\" name=\"idea\" value={idea} onChange={(e) => setIdea(e.target.value)} />\r\n\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\" >\r\n          <Form.Label>Idea description</Form.Label>\r\n          <Form.Control type=\"text\" name=\"description\" value={description} onChange={(e) => setDescription(e.target.value)} />\r\n        </Form.Group>\r\n\r\n        <Button variant=\"outline-dark\" type=\"submit\">\r\n          Submit\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default createDeleteForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}