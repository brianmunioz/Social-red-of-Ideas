{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\brian\\\\Documents\\\\Frontend\\\\ideasapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\brian\\\\Documents\\\\Frontend\\\\ideasapp\\\\src\\\\views\\\\User\\\\Login.jsx\";\n\nimport React, { useState } from 'react';\nimport { Container, Alert } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport './styles.css';\nimport axios from 'axios';\nimport { IdeaProvider, useIdea } from '../../context/idea.context';\nexport default (function () {\n  return /*#__PURE__*/React.createElement(IdeaProvider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Login, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 5\n    }\n  }));\n});\n\nvar Login = function Login() {\n  var token = document.cookie.replace('token=', '');\n  var navigate = useNavigate();\n\n  var _useIdea = useIdea(),\n      setLogin = _useIdea.setLogin;\n\n  var REACT_APP_API_URL = process.env.REACT_APP_API_URL;\n\n  if (token) {\n    navigate('/');\n  }\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pass = _useState4[0],\n      setPass = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!user) {\n      setError('Please complete username field!');\n      setTimeout(function () {\n        setError('');\n      }, 3000);\n      return;\n    }\n\n    if (!pass) {\n      setError('Please complete password field!');\n      setTimeout(function () {\n        setError('');\n      }, 3000);\n      return;\n    }\n\n    axios.post(REACT_APP_API_URL + 'auth/signin', {\n      username: user,\n      password: pass\n    }).then(function (response) {\n      document.cookie = \"token=\".concat(response.data.token, \"; max-age=\").concat(60 * 300, \"; path=/; samesite=strict\");\n      localStorage.setItem('user', JSON.stringify(response.data.user._id));\n      setError(\"\");\n      setLogin(true);\n      navigate('/');\n    }).catch(function () {\n      setError('Please try again later');\n      setTimeout(function () {\n        setError(\"\");\n      }, 3000);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-triangle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"login-header bg-dark fw-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Log in\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"login-container shadow\",\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mb-3\",\n    type: \"text\",\n    name: \"username\",\n    value: user,\n    onChange: function onChange(e) {\n      return setUser(e.target.value);\n    },\n    placeholder: \"user\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mb-3\",\n    type: \"password\",\n    name: \"password\",\n    value: pass,\n    onChange: function onChange(e) {\n      return setPass(e.target.value);\n    },\n    placeholder: \"Password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Log in\",\n    className: \"bg-dark\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  })), error && /*#__PURE__*/React.createElement(Alert, {\n    className: \"mt-3\",\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, error)));\n};","map":{"version":3,"names":["React","useState","Container","Alert","useNavigate","axios","IdeaProvider","useIdea","Login","token","document","cookie","replace","navigate","setLogin","REACT_APP_API_URL","process","env","user","setUser","pass","setPass","error","setError","handleSubmit","e","preventDefault","setTimeout","post","username","password","then","response","data","localStorage","setItem","JSON","stringify","_id","catch","target","value"],"sources":["C:/Users/brian/Documents/Frontend/ideasapp/src/views/User/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Container, Alert } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './styles.css';\r\nimport axios from 'axios';\r\nimport { IdeaProvider, useIdea } from '../../context/idea.context';\r\n\r\nexport default () =>\r\n  <IdeaProvider>\r\n    <Login></Login>\r\n  </IdeaProvider>\r\n\r\nconst Login = () => {\r\n  const token = document.cookie.replace('token=', '');\r\n  const navigate = useNavigate();\r\n  const {setLogin} = useIdea();\r\n  const {REACT_APP_API_URL} = process.env;\r\n\r\n  if (token) {\r\n    navigate('/');\r\n  }\r\n  const [user, setUser] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    if (!user) {\r\n      setError('Please complete username field!');\r\n      setTimeout(() => {\r\n        setError('');\r\n      }, 3000)\r\n      return;\r\n    }\r\n    if (!pass) {\r\n      setError('Please complete password field!');\r\n      setTimeout(() => {\r\n        setError('');\r\n      }, 3000)\r\n      return;\r\n    }\r\n\r\n    axios.post(REACT_APP_API_URL+'auth/signin', {\r\n      username: user,\r\n      password: pass\r\n    })\r\n      .then(response => {\r\n        document.cookie = `token=${response.data.token}; max-age=${60 * 300}; path=/; samesite=strict`;\r\n        localStorage.setItem('user', JSON.stringify(response.data.user._id));\r\n        setError(\"\");\r\n        setLogin(true);\r\n        navigate('/');\r\n      })\r\n      .catch(() => {\r\n        setError('Please try again later');\r\n        setTimeout(() => {\r\n          setError(\"\");\r\n        }, 3000)\r\n      });\r\n  }\r\n\r\n\r\n  return (\r\n    <Container>\r\n      <div className=\"login\">\r\n        <div className=\"login-triangle\" />\r\n        <h2 className=\"login-header bg-dark fw-bold\">Log in</h2>\r\n        <form className=\"login-container shadow\" onSubmit={handleSubmit} >\r\n          <input className='mb-3' type=\"text\" name=\"username\" value={user} onChange={(e) => setUser(e.target.value)} placeholder=\"user\" />\r\n          <input className='mb-3' type=\"password\" name=\"password\" value={pass} onChange={(e) => setPass(e.target.value)} placeholder=\"Password\" />\r\n          <input type=\"submit\" value=\"Log in\" className='bg-dark' />\r\n        </form>\r\n        {error && <Alert className='mt-3' variant='danger'>{error}</Alert>}\r\n\r\n\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}