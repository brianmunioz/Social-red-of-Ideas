{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\brian\\\\Documents\\\\Frontend\\\\ideasapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\brian\\\\Documents\\\\Frontend\\\\ideasapp\\\\src\\\\views\\\\User\\\\MyAccount.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nvar MyAccount = function MyAccount() {\n  var token = document.cookie.replace('token=', '');\n  var user = JSON.parse(localStorage.getItem('user'));\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      userData = _useState2[0],\n      setUserData = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userStats = _useState4[0],\n      setUserStats = _useState4[1];\n\n  var navigate = useNavigate();\n  useEffect(function () {\n    if (!token || !user) {\n      navigate('/');\n    }\n  }, []);\n  useEffect(function () {\n    axios.get(\"http://localhost:5000/v1/api/user/\".concat(user)).then(function (response) {\n      var data = {\n        username: response.data.username,\n        name: response.data.name\n      };\n      setUserData(data);\n    }).catch(console.log);\n  }, []);\n  useEffect(function () {\n    axios.get(\"http://localhost:5000/v1/api/idea\").then(function (response) {\n      var ideasTotal = response.data.filter(function (idea) {\n        return idea.author._id === user;\n      }).length;\n      var positiveVoted = 0;\n      var negativeVoted = 0;\n      response.data.forEach(function (el) {\n        var positive = el.vote.filter(function (el) {\n          return el.author._id === user && el.vote === true;\n        }).length;\n        var negative = el.vote.filter(function (el) {\n          return el.author._id === user && el.vote === false;\n        }).length;\n        positiveVoted += positive;\n        negativeVoted += negative;\n      });\n      var stats = {\n        totalIdeas: ideasTotal,\n        positiveVoted: positiveVoted,\n        negativeVoted: negativeVoted\n      };\n      setUserStats(stats);\n      console.log(stats);\n    }).catch(console.log);\n  }, [userData !== '']);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, userData ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Username: \", userData.username), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"name: \", userData.name)) : /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"No data\"));\n};\n\nexport default MyAccount;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","MyAccount","token","document","cookie","replace","user","JSON","parse","localStorage","getItem","userData","setUserData","userStats","setUserStats","navigate","get","then","response","data","username","name","catch","console","log","ideasTotal","filter","idea","author","_id","length","positiveVoted","negativeVoted","forEach","el","positive","vote","negative","stats","totalIdeas"],"sources":["C:/Users/brian/Documents/Frontend/ideasapp/src/views/User/MyAccount.jsx"],"sourcesContent":["import React,{useState, useEffect} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst MyAccount = () => {\r\n    const token = document.cookie.replace('token=', '');\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    const [userData, setUserData] = useState('');\r\n    const [userStats, setUserStats] = useState();\r\n    const navigate = useNavigate();\r\n    useEffect(()=>{\r\n        if (!token || !user) {\r\n            navigate('/');\r\n          } \r\n    },[]);\r\n    useEffect(()=>{\r\n        axios.get(`http://localhost:5000/v1/api/user/${user}`)\r\n        .then((response)=>{\r\n            const data = {\r\n                username: response.data.username,\r\n                name: response.data.name\r\n            }\r\n            setUserData(data);\r\n            })\r\n        .catch(console.log)\r\n    },[]);\r\n    useEffect(()=>{\r\n        axios.get(`http://localhost:5000/v1/api/idea`)\r\n        .then((response)=>{\r\n          const ideasTotal = response.data.filter(idea => {return idea.author._id === user}).length;\r\n          let positiveVoted = 0;\r\n          let negativeVoted = 0;\r\n\r\n            response.data.forEach((el)=>{\r\n                const positive = el.vote.filter((el)=>{return el.author._id === user && el.vote === true}).length;\r\n                const negative = el.vote.filter((el)=>{return el.author._id === user && el.vote === false}).length;\r\n                positiveVoted+= positive;\r\n                negativeVoted+= negative;\r\n                });\r\n                const stats = {\r\n                    totalIdeas: ideasTotal,\r\n                    positiveVoted,\r\n                    negativeVoted\r\n                }\r\n                setUserStats(stats);\r\n                console.log(stats);\r\n                })\r\n        .catch(console.log)\r\n    },[userData !== '']);\r\n\r\n  return (\r\n    <div>\r\n        {\r\n            userData?\r\n            <div> \r\n            <h1>Username: {userData.username}</h1>\r\n            <h2>name: {userData.name}</h2>\r\n            </div>\r\n            :\r\n            <h1>No data</h1>\r\n        }\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyAccount"],"mappings":"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"},"metadata":{},"sourceType":"module"}